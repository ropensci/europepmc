# rebi - R Interface to Europe PMC RESTful Web Service

```{r echo=FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE,
  message = FALSE
)
```

[![Build Status](https://travis-ci.org/njahn82/rebi.svg?branch=master)](https://travis-ci.org/njahn82/rebi)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/njahn82/rebi?
[![codecov.io](https://codecov.io/github/njahn82/rebi/coverage.svg?branch=master)](https://codecov.io/github/njahn82/rebi?branch=master)branch=master&svg=true)](https://ci.appveyor.com/project/njahn82/rebi)


rebi facilitates access to [Europe PMC RESTful Web
Service](http://europepmc.org/RestfulWebService).

[Europe PMC]((http://europepmc.org/) covers life science literature and it
gives access to open access full texts. Coverage is not only restricted to
Europe, but articles and abstracts are indexed from all over the world. As a
partner in the [PMC International
(PMCi)](http://www.ncbi.nlm.nih.gov/pmc/about/pmci/), Europe PMC ingests all
PubMed content and extends its index with other sources, including Agricola, a
bibliographic database of citations to the agricultural literature, or
Biological Patents.

![Index coverage](https://europepmc.org/wicket/resource/uk.bl.ukpmc.web.pages.faq.Help/images/EuropePMCContent-ver-4BB17F003F8F38DF2D3BBE48AB5896C6.png)

For more background, see:

Europe PMC: a full-text literature database for the life sciences and platform 
for innovation. (2014). Nucleic Acids Research, 43(D1), D1042â€“D1048. doi:[10.1093/nar/gku1061](http://doi.org/10.1093/nar/gku1061)

## Installation

The latest development version can be installed using
[devtools](https://github.com/hadley/devtools) package:

```{r, eval = FALSE}
require(devtools)
install_github("njahn82/rebi")
```

## Search Europe PMC

The search covers both metadata (e.g. abstracts or title) and full texts. To
build your query, please refer to the comprehensive guidance on how to search
Europe PMC: <http://europepmc.org/help>. After you have created your query,
simply paste the text string out of the search box and provide the string as
argument to the `query` parameter.

The search function helps to get a general overview about additional
information types that are offered by Europe PMC and which can be retrieved
through other `rebi`-functions. Columns inform whether open access full texts
(`isOpenAccess`), cross-links to other EBI databases (`hasDbCrossReferences`),
text-mined terms (`hasTextMinedTerms`) or references (`hasReferences`) are
available.

By default, `epmc_search` returns 1.000 records as a maximum. This equals 50
result pages that are returned by the API. To adjust it, simply use the
`n_pages` parameter.

Either list of publication ids (`id_list = TRUE`) or key metadata
information  (`id_list = FALSE`, default option) are returned.

For instance, search for abstracts and full texts that mention `Gabi-Kat`:

```{r}
my_data <- epmc_search(query = 'Gabi-Kat')
# number of records
my_data$hit_count
# first six records
head(my_data$data)
```

Get PLOS Genetics (ISSN:1553-7404) articles that cross-reference EMBL:

```{r}
my_data <- epmc_search(query = 'ISSN:1553-7404 HAS_EMBL:y')
head(my_data$data)
```

Get list of ids that represent articles referencing DataCite DOIs:

```{r}
my_data <- epmc_search(query = "ACCESSION_TYPE:doi", n_pages = 1, 
                       id_list = TRUE)
head(my_data$data)
my_data$hit_count
```

Use [ORCID](http://orcid.org/) to search for personal publications:

```{r}
my_data <- epmc_search(query = 'AUTHORID:"0000-0002-7635-3473"', n_pages = 1) 
head(my_data$data)
my_data$hit_count
```

## Get article details

In addition to key metadata, `epmc_details` also returns full metadata
providing more comprehensive information on the article-level. By default,
PubMed / Medline index is searched.


```{r} 
epmc_details(ext_id = "24270414") 
```

Show author details including ORCID:

```{r}
my_data <- epmc_details(ext_id = "14756321")
my_data$author_details
```

## Get citation counts and citing publications

Citing publications from the Europe PMC index can be retrieved like this:

```{r}
my_cites <- epmc_citations("9338777")
my_cites$hit_count
head(my_cites$data)
```

Please note, that citation counts are often smaller than those held by toll-
access services such as Web of Science or Scopus because the number of
reference sections indexed for Europe PMC considerably differs due to the
lack of full text accessibility.

## Get reference section

Europe PMC indexes more than 5 million reference sections.

```{r}
epmc_refs("PMC3166943", data_src = "pmc")
```

Tip: add `has_reflist:y` to your search string in `epmc_search` to make sure
you only get publications whose reference sections are accessible through
Europe PMC. 

## Retrieve links to other EBI databases

Cross-links to EBI databases are either manually curated (ENA, InterPro, PDB,
IntAct, ChEMBL, ChEBI and ArrayExpress) or automatically gathered through
text-mining (European Nucleotide Archive, UniProt, PDB, OMIM, RefSNP, RefSeq,
Pfam, InterPro, Ensembl, ArrayExpress and data DOIs).

Before retrieving the links, please check availability and sources first:

```{r}
epmc_db_count("12368864")
```

Add `has_xrefs:y` or to your search string in `epmc_search` to make sure
you only get publications with cross-references to EBI databases. 

Select database and get links:

```{r}
epmc_db("12368864", db = "embl")
```

## Get text-mined terms

Text-mined terms that can be accessed via Europe PMC are mapped against
controlled vocabularies such as [Gene
Ontology](http://www.ebi.ac.uk/QuickGO/).  

Before retrieving these terms, please check availability and vocabularies
first:

```{r}
epmc_tm_count("25249410")
```

Select vocabulary to retrieve the terms:

```{r}
epmc_tm("25249410", semantic_type = "GO_TERM")
```

## Links to external sources

With the External Link services, Europe PMC allows third parties to publish
links from Europe PMC to other webpages. Current External Link providers,
whose id can be found through Europe PMC's Advanced Search interface, include
Wikipedia, Dryad Digital Repository or the institutional repo of Bielefeld
University. For more information, see <http://europepmc.org/labslink>.

Check availability and number of links:

```{r}
epmc_lablinks_count("PMC3986813", data_src = "pmc")
```

Get links to PANGEA (`lab_id = "1342"`)

```{r}
epmc_lablinks("24023770", lab_id = "1342")
```

## Full text access

Full texts are in XML format and are only provided for the Open Access subset
of Europe PMC. They can be retrieved by the PMCID.

```{r}
epmc_ftxt("PMC3257301")
```

Books, fetched through the PMID or the 'NBK' book number, can also be loaded
as XML into R for further text-mining activities.

```{r}
epmc_ftxt_book("NBK32884")
```

Please check full-text availability before.

## Other ways to access Europe PubMed Central

### Other APIs

- Data dumps: <https://europepmc.org/FtpSite>
- OAI service: <https://europepmc.org/OaiService>
- SOAP web service: <https://europepmc.org/SoapWebServices>
- Grants RESTful (Grist) API: <https://europepmc.org/GristAPI>

### Other R clients

- use rOpenSci's `oai` to get metadata and full text via Europe PMC's OAI interface: <https://github.com/ropensci/oai>
- use rOpenSci's `rentrez` to interact with [NCBI databases](http://www.ncbi.nlm.nih.gov/) such as [PubMed](http://www.ncbi.nlm.nih.gov/pubmed): <https://github.com/ropensci/rentrez>
- rOpenSci's `fulltext` package gives access to supplementary material of open access life-science publications in Europe PMC: <https://github.com/ropensci/fulltext>

## Meta

Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.

License: GPL-3

Please use the issue tracker for bug reporting and feature requests.

---

[![rofooter](http://ropensci.org/public_images/github_footer.png)](http://ropensci.org)
